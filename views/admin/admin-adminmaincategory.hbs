<div id="wrap" class="container-fluid" style="padding-left: 285px;">
    <div class="">
        <h3>Category Management</h3>

        <form action="/admin/addmaincategory" method="post">
            <input type="text" name="mainCategory" placeholder="Enter The name of main category">
            <button type="submit" class="btn btn-primary">Add Category</button>
        </form>

        {{#if catDeleted}}
      
        <center>
            <p style="color: red;"><strong>{{catDeleted}}</strong></p>
            </center>
        {{/if}}

        {{#if NewcatAdded}}
            <center>
                <p style="color: green;"><strong>{{NewcatAdded}}</strong></p>
            </center>
        {{/if}}
        <table cellpadding="0" cellspacing="0" border="0" class="datatable table table-striped table-bordered"
            id="myTable">
            <thead>
                <tr>
                    <th><strong>Sl. No</strong></th>
                    <th><strong>Main Category</strong></th>
                    <th><strong>Sub categories</strong></th>
                    <th><strong>Action</strong></th>
                </tr>
            </thead>
            <tbody>
                {{!-- Loop for displaying all catgories --}}
                {{#each allCategories}}

                <tr class="gradeX">
                    <td>{{add @index '1'}}</td>
                    <td>{{this.mainCategory}}</td>
                    {{!-- Loop for sub catgory --}}

                    <td>

                        <form action="/admin/addsubcat" method="post">
                            <input type="hidden" name="mainCatId" value="{{this._id}}">
                            <input type="text" name="subCat">
                            <button type="submit" class="btn btn-success">Add subcategory</button>
                        </form>

                        <ol>
                            {{#each this.SubCategory}}
                            <li>
                                {{this}} 
                                {{!-- Delete button --}}
                                <a class=" btn-secondary" data-toggle="modal" data-target="#{{@index}}1"> <i class="bi bi-trash"></i></a>
                            </li>
                            <hr>


                            {{!-- modal for category deletion for sub cat --}}
                            <div class="modal fade" id="{{@index}}1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h3 class="modal-title" style="color: red;" id="exampleModalLabel">Delete</h3>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <h5>Are you sure you want to delete ?</h5>
                                        </div>

                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                                            <a type="button" href="/admin/deletesubcat?index={{@index}}&id={{../this._id}}&name={{this}}" class="btn btn-danger" style="width: 90px;">Delete</a>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                            {{!-- modal ends --}}
                            {{/each}}
                        </ol>
                    </td>
                   
                    
                    {{!-- Modal for delete confirmation --}}
                    <div class="modal fade" id="{{this._id}}" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h3 class="modal-title" style="color: red;" id="exampleModalLabel">Delete</h3>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <h5>Are you sure you want to delete ?</h5>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-success" data-dismiss="modal">Cancel</button>
                                    <a type="button" href="/admin/deletecategory/{{this._id}}" class="btn btn-danger"
                                        style="width: 90px;">Delete</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {{!-- Modal ends --}}

                    <td>
                        <a  data-toggle="modal" data-target="#{{this._id}}"
                            class="btn btn-danger">Delete Category</a>

                    </td>

                    {{!-- Loop end --}}
                </tr>
                {{/each}}

        </table>

    </div>
</div>